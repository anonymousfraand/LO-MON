{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kingswin\\\\Downloads\\\\learning-management-system-project-master\\\\learning-management-system-project-master\\\\lms-react-redux\\\\src\\\\NewCourseForm.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nconst newCourseFormStyle = {\n  border: \"2px solid black\",\n  height: \"50vh\",\n  marginTop: \"40px\",\n  width: \"50vw\",\n  borderRadius: \"20px\"\n};\n\nclass NewCourseForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      name: '',\n      teacher_id: '',\n      subject_id: '',\n      errors: ''\n    };\n\n    this.handleOnChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value,\n        teacher_id: this.props.currentUser.id\n      });\n    };\n\n    this.handleSubmit = e => {\n      const token = localStorage.getItem(\"token\");\n      e.preventDefault(); // console.log(this.state)\n\n      if (this.state.subject_id) {\n        fetch(\"https://lms-api-rails.herokuapp.com/api/v1/teachers/\".concat(this.state.teacher_id, \"/courses\"), {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\",\n            \"Authorization\": \"Bearer \".concat(token)\n          },\n          body: JSON.stringify({\n            course: {\n              name: this.state.name,\n              teacher_id: this.state.teacher_id,\n              subject_id: this.state.subject_id\n            }\n          })\n        }).then(resp => resp.json()).then(data => {\n          this.props.addUserCourse(data);\n          this.props.addCourseToAllCourses(data); // console.log(data.teacher)\n          // this.props.setUserCourses(data)\n\n          this.props.history.push('/courses');\n        });\n      } else {\n        this.setState({\n          errors: 'Subject Selection Required'\n        });\n        window.setTimeout(() => {\n          this.setState({\n            errors: ''\n          });\n        }, 2000);\n      }\n    };\n  }\n\n  render() {\n    // console.log(this.props.currentUser.id)\n    // console.log(this.state)\n    return React.createElement(\"div\", {\n      className: \"ui container\",\n      style: newCourseFormStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"New Course Form\"), React.createElement(\"form\", {\n      className: \"ui form\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Course Name\"), React.createElement(\"input\", {\n      onChange: this.handleOnChange,\n      style: {\n        width: \"80%\"\n      },\n      required: true,\n      type: \"text\",\n      name: \"name\",\n      placeholder: \"Course Name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(\"select\", {\n      onChange: this.handleOnChange,\n      style: {\n        width: \"80%\",\n        margin: \"auto\"\n      },\n      name: \"subject_id\",\n      className: \"ui fluid dropdown\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Select Subject\"), this.props.subjects.map(subject => {\n      return React.createElement(\"option\", {\n        key: subject.id,\n        value: subject.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, subject.name);\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"ui button\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Submit\"))), this.state.errors ? React.createElement(\"div\", {\n      className: \"ui error message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Errors with your submission\"), React.createElement(\"ul\", {\n      className: \"list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, this.state.errors))) : null);\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    subjects: state.subjects,\n    currentUser: state.currentUser\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    addUserCourse: newCourse => {\n      dispatch({\n        type: \"ADD_COURSE\",\n        payload: newCourse\n      });\n    },\n    addCourseToAllCourses: newCourse => {\n      dispatch({\n        type: \"ADD_COURSE_TO_ALL_COURSES\",\n        payload: newCourse\n      });\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewCourseForm);","map":{"version":3,"sources":["C:\\Users\\kingswin\\Downloads\\learning-management-system-project-master\\learning-management-system-project-master\\lms-react-redux\\src\\NewCourseForm.js"],"names":["React","Component","connect","newCourseFormStyle","border","height","marginTop","width","borderRadius","NewCourseForm","state","name","teacher_id","subject_id","errors","handleOnChange","e","setState","target","value","props","currentUser","id","handleSubmit","token","localStorage","getItem","preventDefault","fetch","method","headers","body","JSON","stringify","course","then","resp","json","data","addUserCourse","addCourseToAllCourses","history","push","window","setTimeout","render","margin","subjects","map","subject","mapStateToProps","mapDispatchToProps","dispatch","newCourse","type","payload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport {connect} from 'react-redux'\n\nconst newCourseFormStyle = {\n    border: \"2px solid black\",\n    height: \"50vh\",\n    marginTop: \"40px\",\n    width: \"50vw\",\n    borderRadius: \"20px\"\n}\n\nclass NewCourseForm extends Component {\n    state={\n        name: '',\n        teacher_id: '',\n        subject_id: '',\n        errors: ''\n    }\n\n    handleOnChange = (e) => {\n        this.setState({\n            [e.target.name]: e.target.value,\n            teacher_id: this.props.currentUser.id\n        })\n    }\n\n    handleSubmit = (e) => {\n        const token = localStorage.getItem(\"token\")\n        e.preventDefault()\n        // console.log(this.state)\n        if(this.state.subject_id){\n\n        \n        fetch(`https://lms-api-rails.herokuapp.com/api/v1/teachers/${this.state.teacher_id}/courses`,{\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Accept\": \"application/json\",\n                \"Authorization\": `Bearer ${token}`\n            },\n            body: JSON.stringify({\n                course: {\n                    name: this.state.name,\n                    teacher_id: this.state.teacher_id,\n                    subject_id: this.state.subject_id,\n                }\n            })\n        })\n        .then(resp => resp.json())\n        .then(data => {\n            this.props.addUserCourse(data)\n            this.props.addCourseToAllCourses(data)\n            // console.log(data.teacher)\n            // this.props.setUserCourses(data)\n            this.props.history.push('/courses')\n        })\n        }\n        else{\n            this.setState({\n                errors: 'Subject Selection Required'\n            })\n\n            window.setTimeout(() => {\n                this.setState({\n                  errors: ''\n                });\n              }, 2000);\n        }\n    }\n    render() {\n        // console.log(this.props.currentUser.id)\n        // console.log(this.state)\n        return (\n            <div className=\"ui container\" style={newCourseFormStyle}>\n                <br></br>\n                <h1>New Course Form</h1>\n                <form className=\"ui form\" onSubmit={this.handleSubmit}>\n                    <div className=\"field\">\n                        <label>Course Name</label>\n                        <input onChange={this.handleOnChange} style={{width: \"80%\"}} required type=\"text\" name=\"name\" placeholder=\"Course Name\"/>\n                        \n                        <br></br>\n\n                        <select onChange={this.handleOnChange} style={{width: \"80%\", margin: \"auto\"}} name=\"subject_id\" className=\"ui fluid dropdown\">\n                            <option value=\"\">Select Subject</option>\n                            \n                            {this.props.subjects.map(subject => {\n                                return <option key={subject.id} value={subject.id}>{subject.name}</option>\n                            })}\n                        </select>\n\n                        <br></br>\n\n                        <button className=\"ui button\" type=\"submit\">Submit</button>\n                    </div>\n                </form>\n                {\n                    this.state.errors ? \n                    <div className=\"ui error message\">\n                        <div className=\"header\">\n                            Errors with your submission\n                        </div>\n                        <ul className=\"list\">\n                            <li>{this.state.errors}</li>\n                        </ul>\n                    </div>\n                    :\n                    null\n                }\n                \n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state){\n    return {\n        subjects: state.subjects,\n        currentUser: state.currentUser\n    }\n}\n\nfunction mapDispatchToProps(dispatch){\n    return {\n        addUserCourse: (newCourse) => {\n            dispatch({type:\"ADD_COURSE\", payload: newCourse})\n        },\n        addCourseToAllCourses: (newCourse) => {\n            dispatch({type: \"ADD_COURSE_TO_ALL_COURSES\", payload: newCourse})\n        }\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewCourseForm)\n"]},"metadata":{},"sourceType":"module"}